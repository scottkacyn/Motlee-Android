package com.motlee.android.object;

import android.content.Context;
import android.content.Intent;
import android.net.Uri;

public class ComparableIntent extends Intent implements Comparable<Intent> {

	public ComparableIntent() {
	}

	public ComparableIntent(Intent o) {
		super(o);
	}

	public ComparableIntent(String action) {
		super(action);
	}

	public ComparableIntent(String action, Uri uri) {
		super(action, uri);
	}

	public ComparableIntent(Context packageContext, Class<?> cls) {
		super(packageContext, cls);
	}

	public ComparableIntent(String action, Uri uri, Context packageContext,
			Class<?> cls) {
		super(action, uri, packageContext, cls);
	}

	public int compareTo(Intent another) {
        if (this.filterEquals(b)) {
            if (this.getExtras() != null && b.getExtras() != null) {
                // check if the keysets are the same size
                if (this.getExtras().keySet().size() != b.getExtras().keySet().size()) return false;
                // compare all of a's extras to b
                for (String key : this.getExtras().keySet()) {
                    if (!b.getExtras().containsKey(key)) {
                        return false;
                    } else if (!this.getExtras().get(key).equals(b.getExtras().get(key))) {
                        return false;
                    }
                }
                // compare all of b's extras to a
                for (String key : b.getExtras().keySet()) {
                    if (!this.getExtras().containsKey(key)) {
                        return false;
                    } else if (!b.getExtras().get(key).equals(this.getExtras().get(key))) {
                        return false;
                    }
                }
            }
            if (this.getExtras() == null && b.getExtras() == null) return true;
            // either a has extras and b doesn't or b has extras and a doesn't
            return false;
        } else {
            return false;
        }
	}

}
